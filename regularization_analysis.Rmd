---
title: Regularization in Thomas corpus
author: Dan Yurovsky
date: "`r Sys.Date()`"
output: 
  html_document:
  toc: false
number_sections: false
theme: lumen
toc_float: false
code_folding: hide
---
  
```{r setup, include = FALSE}
# load packages
library(knitr)
library(tidyverse)
library(stringr) 

opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE, 
               error = FALSE, cache = TRUE, tidy = FALSE)
```

```{r read_data}
split_line <- function(line, num) {
  splits <- first(str_split(line, ","))[1:8] %>%
    gsub("\'", "", .) %>%
    gsub("\\}", "", .) %>%
    str_split(": ", simplify = TRUE) %>%
    as_data_frame() %>%
    mutate(line = num) # %>%

}

data <- read_file("thomas_data.txt") %>%
  str_split(.,pattern = "\\{") %>%
  first() %>%
  as_data_frame() %>%
  slice(2:(nrow(.)-1)) %>%
  unlist() 

split_data <- map(1:length(data), function(n) split_line(nth(data,n), n)) %>%
  bind_rows() %>%
  mutate(V1 = str_trim(V1)) %>%
  spread(V1, V2)
```